<div class="container mt-5 mb-5">
    <div class="row d-flex justify-content-center">
        <div class="col-md-10">
            <div class="card">
                <div class="row">
                    <div class="col-md-6">
                        <div class="images p-3">
                            <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
                                <div class="carousel-inner">
                                    <div class="carousel-item active">
                                    <img src=<%= @cabana.img_1 %> class="d-block w-100" alt="...">
                                    </div>
                                    <div class="carousel-item">
                                    <img src=<%= @cabana.img_2 %> class="d-block w-100" alt="...">
                                    </div>
                                    <div class="carousel-item">
                                    <img src=<%= @cabana.img_3 %> class="d-block w-100" alt="...">
                                    </div>
                                    <div class="carousel-item">
                                    <img src=<%= @cabana.img_4 %> class="d-block w-100" alt="...">
                                    </div>
                                    <div class="carousel-item">
                                    <img src=<%= @cabana.img_5 %> class="d-block w-100" alt="...">
                                    </div>
                                </div>
                                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Previous</span>
                                </button>
                                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="visually-hidden">Next</span>
                                </button>
                                </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="product p-4">
                            <div class="d-flex justify-content-between align-items-center">
                                <div class="d-flex align-items-center"> <i class="fa fa-long-arrow-left"></i></div> <i class="fa fa-shopping-cart text-muted"></i>
                            </div>
                            <div class="mt-4 mb-3"> <span class="text-uppercase text-muted brand"></span>
                                <h5 class="text-uppercase"> Cabaña tipo <%= @cabana.nombre %></h5>
                            </div>
                            <p class="about"> <%= @cabana.descripcion %></p>
                            <div class="sizes mt-3">
                                <h6 class="">Capacidad para máximo <%= @cabana.personas%> personas</h6>
                            </div>
                            <div class="sizes mt-3">
                                <h6 class="">$<%= @cabana.precio%> por noche</h6>
                            </div>
                            <div class="sizes mt-3">
                                <h6 class="">Fechas Disponibles</h6>
                                <%= month_calendar(events: @reservas) do |date, reservas| %>
                                <%= date.day %>
                              
                                <% reservas.each do |reserva| %>
                                <% if current_user %>
                                  <div>
                                    <% if reserva.id_cabana == @cabana.id && current_user.id == reserva.id_usuario %>
                                        <i class="" style="color: green;">✓</i>
                                    <% end %>
                                    <% if reserva.id_cabana == @cabana.id && current_user.id != reserva.id_usuario %>
                                        <i class="" style="color: red;">X</i>
                                    <% end %>
                                    <% else %>
                                        <% if reserva.id_cabana == @cabana.id %>
                                            <i class="" style="color: red;">X</i>
                                        <% end %>

                                  </div>

                                <% end %>
                                <% end %>
                                <% end %>
                            </div>
                            <% if current_user %>
                            <div class="cart mt-4 align-items-center"> 
                                <%= link_to "Reservar", new_reserva_path, class: "btn btn-danger text-uppercase mr-2 px-4" %>
                            </div>
                            <% else %>
                            <div class="cart mt-4 align-items-center"> Debes iniciar sesión para reservar una cabaña <br/>
                                <%= link_to "Ingresar", new_user_session_path, class: "btn btn-danger text-uppercase mr-2 px-4" %>
                            </div>
                            <% end %>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
